{% extends 'base.html.twig' %}


{% block body %}
    <br><br>
    {% for message in app.flashes('info') %}
    <div class="alert alert-success" style="width:250px; height: 50px; align-items: center;justify-content: center">
        {{ message }}

    </div>
    {% endfor %}

    <br><br>
<style>
    .example-wrapper { margin: 1em auto; max-width: 800px; width: 95%; font: 18px/1.5 sans-serif; }
    .example-wrapper code { background:transparent; padding: 2px 6px; }
</style>


<div class="row"style="display: flex;align-items: center;justify-content: center" >

    <div class="col-lg-6">
    <div class="card">
        <div class="card-body">
            <h5 class="card-title" style="color: #103981">Liste des jeux videos</h5>
            <div id="divs">
                <input class="form-control" type="text" id="search" placeholder="üîç">
                <center>
                    <br>
                    <svg xmlns="http://www.w3.org/2000/svg" width="40" height="40" fill="grey" class="bi bi-file-earmark-pdf-fill" viewBox="0 0 16 16">
                        <a xlink:href="{{ path('pdfC') }}" >
                            <path d="M5.523 12.424c.14-.082.293-.162.459-.238a7.878 7.878 0 0 1-.45.606c-.28.337-.498.516-.635.572a.266.266 0 0 1-.035.012.282.282 0 0 1-.026-.044c-.056-.11-.054-.216.04-.36.106-.165.319-.354.647-.548zm2.455-1.647c-.119.025-.237.05-.356.078a21.148 21.148 0 0 0 .5-1.05 12.045 12.045 0 0 0 .51.858c-.217.032-.436.07-.654.114zm2.525.939a3.881 3.881 0 0 1-.435-.41c.228.005.434.022.612.054.317.057.466.147.518.209a.095.095 0 0 1 .026.064.436.436 0 0 1-.06.2.307.307 0 0 1-.094.124.107.107 0 0 1-.069.015c-.09-.003-.258-.066-.498-.256zM8.278 6.97c-.04.244-.108.524-.2.829a4.86 4.86 0 0 1-.089-.346c-.076-.353-.087-.63-.046-.822.038-.177.11-.248.196-.283a.517.517 0 0 1 .145-.04c.013.03.028.092.032.198.005.122-.007.277-.038.465z"/>
                            <path fill-rule="evenodd" d="M4 0h5.293A1 1 0 0 1 10 .293L13.707 4a1 1 0 0 1 .293.707V14a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V2a2 2 0 0 1 2-2zm5.5 1.5v2a1 1 0 0 0 1 1h2l-3-3zM4.165 13.668c.09.18.23.343.438.419.207.075.412.04.58-.03.318-.13.635-.436.926-.786.333-.401.683-.927 1.021-1.51a11.651 11.651 0 0 1 1.997-.406c.3.383.61.713.91.95.28.22.603.403.934.417a.856.856 0 0 0 .51-.138c.155-.101.27-.247.354-.416.09-.181.145-.37.138-.563a.844.844 0 0 0-.2-.518c-.226-.27-.596-.4-.96-.465a5.76 5.76 0 0 0-1.335-.05 10.954 10.954 0 0 1-.98-1.686c.25-.66.437-1.284.52-1.794.036-.218.055-.426.048-.614a1.238 1.238 0 0 0-.127-.538.7.7 0 0 0-.477-.365c-.202-.043-.41 0-.601.077-.377.15-.576.47-.651.823-.073.34-.04.736.046 1.136.088.406.238.848.43 1.295a19.697 19.697 0 0 1-1.062 2.227 7.662 7.662 0 0 0-1.482.645c-.37.22-.699.48-.897.787-.21.326-.275.714-.08 1.103z"/>
                        </a>
                    </svg>
                    <a class="btn btn-outline-info" href="{{ path('Stat') }}" style="font-size: 17px;">Afficher les statistiques</a>
                    <br><br>
                    <p style="color: blue">Trier par rating:
                        <a style="color:#FF0000;" class="tg-btn" href="" id="idup">‚¨ÜÔ∏è</a>
                        <a style="color:#25DD28;" class="tg-btn" href="" id="iddown">‚¨áÔ∏è</a>
                </center>
                </p>
            </div>
            <!-- Active Table -->

            <table id="t"  class="table table-borderless" >
                <thead>
                <tr>
                    <th>Nom</th>
                    <th>Image</th>
                    <th>Rating</th>
                    <th>Publications</th>
                    <th></th>
                    <th></th>
                </tr>
                </thead>
                <tbody id="all">
                {% for JV in b %}
                    <tr>
                        <td>{{ JV.namevg }}</td>
                        <td>
                            <img src="{{ asset('uploads/images/' ~JV.imagevg) }}"
                                 alt="" style= "width: 300px;height:300px">
                        </td>
                        <td>
                            {{ JV.rating }}
                            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="yellow" class="bi bi-star-fill" viewBox="0 0 16 16">
                                <path d="M3.612 15.443c-.386.198-.824-.149-.746-.592l.83-4.73L.173 6.765c-.329-.314-.158-.888.283-.95l4.898-.696L7.538.792c.197-.39.73-.39.927 0l2.184 4.327 4.898.696c.441.062.612.636.282.95l-3.522 3.356.83 4.73c.078.443-.36.79-.746.592L8 13.187l-4.389 2.256z"/>
                            </svg>
                        </td>
                        <td>
                            <a class="btn btn-outline-info" href="/publication/{{ JV.id }}"style="font-size: 17px">Afficher</a>
                            <br><br>
                            <a class="btn btn-outline-info" href="/addPub/{{ JV.id }}"style="font-size: 17px">Publier</a>
                        </td>
                        <td>
                            <svg xmlns="http://www.w3.org/2000/svg" width="40" height="40" fill="grey" class="bi bi-archive" viewBox="0 0 16 16">
                                <a xlink:href="{{ path('modifJeu',{'id':JV.id}) }}" ><path d="M9.405 1.05c-.413-1.4-2.397-1.4-2.81 0l-.1.34a1.464 1.464 0 0 1-2.105.872l-.31-.17c-1.283-.698-2.686.705-1.987 1.987l.169.311c.446.82.023 1.841-.872 2.105l-.34.1c-1.4.413-1.4 2.397 0 2.81l.34.1a1.464 1.464 0 0 1 .872 2.105l-.17.31c-.698 1.283.705 2.686 1.987 1.987l.311-.169a1.464 1.464 0 0 1 2.105.872l.1.34c.413 1.4 2.397 1.4 2.81 0l.1-.34a1.464 1.464 0 0 1 2.105-.872l.31.17c1.283.698 2.686-.705 1.987-1.987l-.169-.311a1.464 1.464 0 0 1 .872-2.105l.34-.1c1.4-.413 1.4-2.397 0-2.81l-.34-.1a1.464 1.464 0 0 1-.872-2.105l.17-.31c.698-1.283-.705-2.686-1.987-1.987l-.311.169a1.464 1.464 0 0 1-2.105-.872l-.1-.34zM8 10.93a2.929 2.929 0 1 1 0-5.86 2.929 2.929 0 0 1 0 5.858z"/>
                                </a>
                            </svg>
                            <br><br>
                            <svg xmlns="http://www.w3.org/2000/svg" width="40" height="40" fill="red" class="bi bi-archive" viewBox="0 0 16 16">
                                <a xlink:href="{{ path('supp_Vg',{'id':JV.id}) }}" ><path d="M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zM5.354 4.646a.5.5 0 1 0-.708.708L7.293 8l-2.647 2.646a.5.5 0 0 0 .708.708L8 8.707l2.646 2.647a.5.5 0 0 0 .708-.708L8.707 8l2.647-2.646a.5.5 0 0 0-.708-.708L8 7.293 5.354 4.646z"/>
                                </a>
                            </svg>
                            <br><br>
                        <td>
                    </tr>
                {% else %}
                    <tr>
                        <td colspan="7">no records found</td>
                    </tr>
                {% endfor %}

                </tbody>
                <tbody id="search">
                </tbody>

            </table>
            <div class="navigation" style="display: flex;align-items: center;justify-content: center">
                {{ knp_pagination_render(b) }}
            </div>

            <br>
            <form action="addJeu">
                <input type="submit" value="Ajouter" class="cmn-btn" style="color:#0a58ca"/>
            </form>




            <!-- End Tables without borders -->
        </div>
    </div>

    </div>


</div>
    <br><br>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js">
    </script>
    <script>
        $( document ).ready(function() {

            /*begin rechercher avancee multicrit√©res selon sujet et staus*/
            $("#divs").keyup(function(e){
                /* La variable value va prendre la valeur ins√©rer dans le champ de texte afin d‚Äôeffectuer la recherche */
                var value = $("#search").val();
                    //    alert(value);
                    /* Ajax est lanc√© lors du remplissage du champ texte dont l‚Äôid est ¬´ search ¬ª pour faire la recherche */
                    $.ajax({
                        /* l‚Äôurl est une chaine de caract√®res contenant l‚Äôadresse o√π la requ√™te est envoy√©e */
                        url : "{{ path('search_recc') }}",
                        /* La m√©thode utilis√©e pour transf√©rer les donn√©es est GET */
                        type : 'GET',
                        /*Ici search value va prendre la chaine entr√©e par un utilisateur dans la zone de recherche et sera plac√©e apr√®s l‚Äôurl */
                        data: {
                            'searchValue' : value,
                        },
                        /*Cette fonction permet de vider le contenu du tableau pour recevoir le nouveau contenu*/
                        success : function(retour){
                            if(retour){
                                $('#t tbody#search').empty();
                                $.each(JSON.parse(retour), function(i, obj) {
                                    $('#t tbody#all').hide();
                                    $('#t tbody#search').append(
                                        '<tr>' +
                                        '<td> '+obj.namevg +'  </td>' +
                                        '<td><img alt="" style= "width: 300px;height:300px" src="{{ asset('uploads/images/') }}'+obj.imagevg+'" > </td>' +
                                        '<td>' +obj.rating+ '</td>'+
                                                    '<td>' +
                                                        '<a class="btn btn-outline-info" href="/publication/'+obj.id+'" style="font-size: 17px">Afficher</a>'+
                                                        '<br><br>' +
                                                        '<a class="btn btn-outline-info" href="/addPub/'+obj.id+'"style="font-size: 17px">Publier</a>' +
                                                            '</td>  ' +
                                        '<td>'+
                                           '<svg xmlns="http://www.w3.org/2000/svg" width="40" height="40" fill="grey" class="bi bi-archive" viewBox="0 0 16 16">'+
                                               ' <a xlink:href="{{ path('modifJeu',{'id':'+obj.id+'}) }}" ><path d="M9.405 1.05c-.413-1.4-2.397-1.4-2.81 0l-.1.34a1.464 1.464 0 0 1-2.105.872l-.31-.17c-1.283-.698-2.686.705-1.987 1.987l.169.311c.446.82.023 1.841-.872 2.105l-.34.1c-1.4.413-1.4 2.397 0 2.81l.34.1a1.464 1.464 0 0 1 .872 2.105l-.17.31c-.698 1.283.705 2.686 1.987 1.987l.311-.169a1.464 1.464 0 0 1 2.105.872l.1.34c.413 1.4 2.397 1.4 2.81 0l.1-.34a1.464 1.464 0 0 1 2.105-.872l.31.17c1.283.698 2.686-.705 1.987-1.987l-.169-.311a1.464 1.464 0 0 1 .872-2.105l.34-.1c1.4-.413 1.4-2.397 0-2.81l-.34-.1a1.464 1.464 0 0 1-.872-2.105l.17-.31c.698-1.283-.705-2.686-1.987-1.987l-.311.169a1.464 1.464 0 0 1-2.105-.872l-.1-.34zM8 10.93a2.929 2.929 0 1 1 0-5.86 2.929 2.929 0 0 1 0 5.858z"/>'+
                                                '</a>'+
                                            '</svg>'+
                                        '<br><br>' +
                                                '<svg xmlns="http://www.w3.org/2000/svg" width="40" height="40" fill="red" class="bi bi-archive" viewBox="0 0 16 16">'+
                                                    '<a xlink:href="{{ path('supp_Vg',{'id':'+obj.id+'}) }}" ><path d="M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zM5.354 4.646a.5.5 0 1 0-.708.708L7.293 8l-2.647 2.646a.5.5 0 0 0 .708.708L8 8.707l2.646 2.647a.5.5 0 0 0 .708-.708L8.707 8l2.647-2.646a.5.5 0 0 0-.708-.708L8 7.293 5.354 4.646z"/>'+
                                                    '</a>'+
                                                    '</svg>'+
                                                    '<td>'+
                                        ' </tr>');
                                });
                            }
                            else
                            {

                                $('#t tbody#all').show();
                                $('#t tbody#search').empty();
                                $('#t tbody#search').fadeIn('fast');

                            }
                        },
                    });
                    return false;
            });
            /*end rechercher avancee multicrit√©res selon sujet et staus*/
            /*begin trie up selon id*/
            $("#idup").click(function(e){
                /* La variable value va prendre la valeur ins√©rer dans le champ de texte afin d‚Äôeffectuer la recherche */
                var value = $("#search").val();
                var value3 ="ASC";

                //    alert(value);
                /* Ajax est lanc√© lors du remplissage du champ texte dont l‚Äôid est ¬´ search ¬ª pour faire la recherche */
                $.ajax({
                    /* l‚Äôurl est une chaine de caract√®res contenant l‚Äôadresse o√π la requ√™te est envoy√©e */
                    url : "{{ path('search_recc') }}",
                    /* La m√©thode utilis√©e pour transf√©rer les donn√©es est GET */
                    type : 'GET',
                    /*Ici search value va prendre la chaine entr√©e par un utilisateur dans la zone de recherche et sera plac√©e apr√®s l‚Äôurl */
                    data: {
                        'searchValue' : value,
                        'orderid': value3
                    },
                    /*Cette fonction permet de vider le contenu du tableau pour recevoir le nouveau contenu*/
                    success : function(retour){
                        if(retour){
                            $('#t tbody#search').empty();
                            $.each(JSON.parse(retour), function(i, obj) {
                                $('#t tbody#all').hide();
                                $('#t tbody#search').append(

                                    '<tr>' +
                                    '<td> '+obj.namevg +'  </td>' +
                                    '<td><img alt="" style= "width: 300px;height:300px" src="{{ asset('uploads/images/') }}'+obj.imagevg+'" > </td>' +
                                    '<td>' +obj.rating+ '</td>'+
                                    '<td>' +
                                    '<a class="btn btn-outline-info" href="/publication/'+obj.id+'" style="font-size: 17px">Afficher</a>'+
                                    '<br><br>' +
                                    '<a class="btn btn-outline-info" href="/addPub/'+obj.id+'"style="font-size: 17px">Publier</a>' +
                                    '</td>  ' +
                                    '<td>'+
                                    '<svg xmlns="http://www.w3.org/2000/svg" width="40" height="40" fill="grey" class="bi bi-archive" viewBox="0 0 16 16">'+
                                    ' <a xlink:href="{{ path('modifJeu',{'id':'+obj.id+'}) }}" ><path d="M9.405 1.05c-.413-1.4-2.397-1.4-2.81 0l-.1.34a1.464 1.464 0 0 1-2.105.872l-.31-.17c-1.283-.698-2.686.705-1.987 1.987l.169.311c.446.82.023 1.841-.872 2.105l-.34.1c-1.4.413-1.4 2.397 0 2.81l.34.1a1.464 1.464 0 0 1 .872 2.105l-.17.31c-.698 1.283.705 2.686 1.987 1.987l.311-.169a1.464 1.464 0 0 1 2.105.872l.1.34c.413 1.4 2.397 1.4 2.81 0l.1-.34a1.464 1.464 0 0 1 2.105-.872l.31.17c1.283.698 2.686-.705 1.987-1.987l-.169-.311a1.464 1.464 0 0 1 .872-2.105l.34-.1c1.4-.413 1.4-2.397 0-2.81l-.34-.1a1.464 1.464 0 0 1-.872-2.105l.17-.31c.698-1.283-.705-2.686-1.987-1.987l-.311.169a1.464 1.464 0 0 1-2.105-.872l-.1-.34zM8 10.93a2.929 2.929 0 1 1 0-5.86 2.929 2.929 0 0 1 0 5.858z"/>'+
                                    '</a>'+
                                    '</svg>'+
                                    '<br><br>' +
                                    '<svg xmlns="http://www.w3.org/2000/svg" width="40" height="40" fill="red" class="bi bi-archive" viewBox="0 0 16 16">'+
                                    '<a xlink:href="{{ path('supp_Vg',{'id':'+obj.id+'}) }}" ><path d="M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zM5.354 4.646a.5.5 0 1 0-.708.708L7.293 8l-2.647 2.646a.5.5 0 0 0 .708.708L8 8.707l2.646 2.647a.5.5 0 0 0 .708-.708L8.707 8l2.647-2.646a.5.5 0 0 0-.708-.708L8 7.293 5.354 4.646z"/>'+
                                    '</a>'+
                                    '</svg>'+
                                    '<td>'+
                                    ' </tr>');
                            });
                        }
                        else
                        {
                            $('#t tbody#all').show();
                            $('#t tbody#search').empty();
                            $('#t tbody#search').fadeIn('fast');
                        }
                    },
                });
                return false;

            });
            /*end trie up selon id*/

            /*begin trie down selon id*/
            $("#iddown").click(function(e){
                /* La variable value va prendre la valeur ins√©rer dans le champ de texte afin d‚Äôeffectuer la recherche */
                var value = $("#search").val();
                var value3 ="DESC";

                //    alert(value);
                /* Ajax est lanc√© lors du remplissage du champ texte dont l‚Äôid est ¬´ search ¬ª pour faire la recherche */
                $.ajax({
                    /* l‚Äôurl est une chaine de caract√®res contenant l‚Äôadresse o√π la requ√™te est envoy√©e */
                    url : "{{ path('search_recc') }}",
                    /* La m√©thode utilis√©e pour transf√©rer les donn√©es est GET */
                    type : 'GET',
                    /*Ici search value va prendre la chaine entr√©e par un utilisateur dans la zone de recherche et sera plac√©e apr√®s l‚Äôurl */
                    data: {
                        'searchValue' : value,
                        'orderid': value3
                    },
                    /*Cette fonction permet de vider le contenu du tableau pour recevoir le nouveau contenu*/
                    success : function(retour){
                        if(retour){
                            $('#t tbody#search').empty();
                            $.each(JSON.parse(retour), function(i, obj) {
                                $('#t tbody#all').hide();
                                $('#t tbody#search').append(
                                    '<tr>' +
                                    '<td> '+obj.namevg +'  </td>' +
                                    '<td><img alt="" style= "width: 300px;height:300px" src="{{ asset('uploads/images/') }}'+obj.imagevg+'" > </td>' +
                                    '<td>' +obj.rating+ '</td>'+
                                    '<td>' +
                                    '<a class="btn btn-outline-info" href="/publication/'+obj.id+'" style="font-size: 17px">Afficher</a>'+
                                    '<br><br>' +
                                    '<a class="btn btn-outline-info" href="/addPub/'+obj.id+'"style="font-size: 17px">Publier</a>' +
                                    '</td>  ' +
                                    '<td>'+
                                    '<svg xmlns="http://www.w3.org/2000/svg" width="40" height="40" fill="grey" class="bi bi-archive" viewBox="0 0 16 16">'+
                                    ' <a xlink:href="{{ path('modifJeu',{'id':'+obj.id+'}) }}" ><path d="M9.405 1.05c-.413-1.4-2.397-1.4-2.81 0l-.1.34a1.464 1.464 0 0 1-2.105.872l-.31-.17c-1.283-.698-2.686.705-1.987 1.987l.169.311c.446.82.023 1.841-.872 2.105l-.34.1c-1.4.413-1.4 2.397 0 2.81l.34.1a1.464 1.464 0 0 1 .872 2.105l-.17.31c-.698 1.283.705 2.686 1.987 1.987l.311-.169a1.464 1.464 0 0 1 2.105.872l.1.34c.413 1.4 2.397 1.4 2.81 0l.1-.34a1.464 1.464 0 0 1 2.105-.872l.31.17c1.283.698 2.686-.705 1.987-1.987l-.169-.311a1.464 1.464 0 0 1 .872-2.105l.34-.1c1.4-.413 1.4-2.397 0-2.81l-.34-.1a1.464 1.464 0 0 1-.872-2.105l.17-.31c.698-1.283-.705-2.686-1.987-1.987l-.311.169a1.464 1.464 0 0 1-2.105-.872l-.1-.34zM8 10.93a2.929 2.929 0 1 1 0-5.86 2.929 2.929 0 0 1 0 5.858z"/>'+
                                    '</a>'+
                                    '</svg>'+
                                    '<br><br>' +
                                    '<svg xmlns="http://www.w3.org/2000/svg" width="40" height="40" fill="red" class="bi bi-archive" viewBox="0 0 16 16">'+
                                    '<a xlink:href="{{ path('supp_Vg',{'id':'+obj.id+'}) }}" ><path d="M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zM5.354 4.646a.5.5 0 1 0-.708.708L7.293 8l-2.647 2.646a.5.5 0 0 0 .708.708L8 8.707l2.646 2.647a.5.5 0 0 0 .708-.708L8.707 8l2.647-2.646a.5.5 0 0 0-.708-.708L8 7.293 5.354 4.646z"/>'+
                                    '</a>'+
                                    '</svg>'+
                                    '<td>'+
                                    ' </tr>');
                            });
                        }
                        else
                        {
                            $('#t tbody#all').show();
                            $('#t tbody#search').empty();
                            $('#t tbody#search').fadeIn('fast');
                        }
                    },
                });
                return false;

            });
            /*end trie down selon id*/
        });
    </script>


{% endblock %}
